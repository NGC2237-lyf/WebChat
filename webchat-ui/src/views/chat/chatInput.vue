<template>
  <div class="chatinput">
    <!-- 附加功能，表情，发送附件之类的 -->
    <div class="extend">
      <svg
        t="1687933295583"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="2305"
        width="20"
        height="20"
      >
        <path
          d="M945.424922 509.059018c0-240.652965-195.076954-435.727873-435.726849-435.727873-240.651942 0-435.727873 195.074907-435.727873 435.727873 0 240.662175 195.075931 435.737082 435.727873 435.737082 98.792027 0 189.248202-33.611515 262.339894-88.998987 3.003404-3.40761 4.975315-7.753591 4.975315-12.637832 0-10.666944-8.651031-19.315928-19.315928-19.315928-5.53404 0-10.464329 2.194992-13.981433 5.91471l-0.246617 0c-65.407686 48.12916-145.915277 76.945463-233.346559 76.945463-217.908962 0-394.587893-176.701444-394.587893-394.598126 0-217.931474 176.678932-394.588917 394.587893-394.588917 217.930451 0 394.58687 176.657442 394.58687 394.588917 0 66.571185-15.617699 129.220037-44.74611 184.229908l0 0.323365c-0.536212 1.838881-1.122567 3.631714-1.122567 5.602601 0 10.666944 8.650007 19.315928 19.314904 19.315928 8.312316 0 15.259542-5.335519 17.971303-12.68388l0 0.1361C927.164023 649.080052 945.424922 581.210291 945.424922 509.059018zM395.534963 391.95902c0-24.334221-19.71911-44.052309-44.053332-44.052309-24.334221 0-44.052309 19.718087-44.052309 44.052309 0 24.334221 19.718087 44.029796 44.052309 44.029796C375.815853 435.989839 395.534963 416.294264 395.534963 391.95902zM669.125085 347.974249c-24.314779 0-44.030819 19.696598-44.030819 44.029796s19.717064 44.052309 44.030819 44.052309c24.332175 0 44.052309-19.71911 44.052309-44.052309C713.17637 367.669824 693.456237 347.974249 669.125085 347.974249zM680.214654 642.001843c-2.62171 0-5.063319 0.647753-7.370875 1.477654l-0.201591 0c-49.497321 22.382776-104.283088 34.728966-162.137751 34.728966-58.752102 0-114.322745-12.097526-164.423817-35.111682l-0.448208 0c-1.74576-0.468674-3.473101-1.095961-5.377474-1.095961-11.965519 0-21.621437 9.655917-21.621437 21.597901 0 7.912204 5.685489 15.400758 12.027941 19.173688-0.169869-0.075725-0.297782-0.132006 0.048095 0.028653 54.629201 24.670889 116.382661 39.593763 180.219571 39.593763 64.24214 0 124.875079-14.564717 179.772386-39.526225 6.721075-3.697205 11.293207-10.891048 11.293207-19.114336C701.994704 651.726322 692.224176 642.001843 680.214654 642.001843z"
          fill="#272636"
          p-id="2306"
        ></path>
      </svg>
      <svg
        t="1687933319674"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="3320"
        width="20"
        height="20"
      >
        <path
          d="M912 208H427.872l-50.368-94.176A63.936 63.936 0 0 0 321.056 80H112c-35.296 0-64 28.704-64 64v736c0 35.296 28.704 64 64 64h800c35.296 0 64-28.704 64-64v-608c0-35.296-28.704-64-64-64z m-800-64h209.056l68.448 128H912v97.984c-0.416 0-0.8-0.128-1.216-0.128H113.248c-0.416 0-0.8 0.128-1.248 0.128V144z m0 736v-96l1.248-350.144 798.752 1.216V784h0.064v96H112z"
          fill="#020202"
          p-id="3321"
        ></path>
      </svg>
    </div>
    <textarea class="textarea" v-model="inputValue.text"></textarea>
    <button class="send" @click="addMessage">发送</button>
  </div>
</template>

<script>
import { ref, reactive, onMounted, computed, markRaw, toRaw } from "vue";
export default {
  name: "chatInput",
  setup(props, context) {
    let inputValue = reactive({
      text: "",
      avatar: "",
      name: "一类小魔鬼",
    });

    function addMessage() {
      let obj = {
        text: inputValue.text,
        avatar: inputValue.avatar,
        name: inputValue.name,
      };
      //TODO
      context.emit("sendMessage", obj);
      inputValue.text = "";
    }
    return {
      inputValue,
      addMessage,
    };
  },
};
</script>

<style scoped>
.chatinput {
  width: 100%;
  border: 1px solid;
  height: 29%;
  position: relative;
}
.extend {
  display: flex;
}
.extend svg {
  padding: 5px 0 0 5px;
}
.textarea {
  width: 98%;
  background-color: transparent;
  border: none;
  padding: 0 1%;
  padding-top: 5px;
  font-size: 18px;
  resize: none;
  outline: none;
  height: 89%;
}
.send {
  background-color: rgba(135, 207, 235, 0.62);
  width: 80px;
  height: 30px;
  padding: 5px;
  cursor: pointer;
  border: none;
  position: absolute;
  bottom: 10px;
  right: 10px;
}
</style>